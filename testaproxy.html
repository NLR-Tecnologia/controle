<html>
  <head>
    <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
    <script>
    let openedWindow;
    
    function cmd(valor){


      /* let xhr = new XMLHttpRequest();

          xhr.open('GET', "https://nlr-tecnologia.github.io/controle/comando", true);
          fetch("https://nlr-tecnologia.github.io/controle/comando");

          xhr.onreadystatechange = () => {
            if (xhr.readyState == 4) {
              if (xhr.status == 200) {
                console.log(JSON.parse(xhr.responseText));
                //document.write(xhr.responseText);

              }
            }
          };
      */
      
     openedWindow = window.open(valor,'_self',false);
      function delay(time) {
        return new Promise(resolve => setTimeout(resolve, time));
      }
      
      async function test() {
        console.log('start timer');
        await delay(300);
        openedWindow.close();
        console.log('after 1 second');
      }
      test();
      
    }
  </script>

    
    
  </head>
<body>
<input type="button" value="liga tv" onclick="cmd('http://192.168.0.184/api/comando/ligatv');"/><br>
<input type="button" value="desliga tv" onclick="cmd('http://192.168.0.184/api/comando/desligatv');"/>
</body>
</html>
